(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{625:function(s,n,a){"use strict";a.r(n);var e=a(7),t=Object(e.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("blockquote",[a("blockquote",[a("blockquote",[a("p",[s._v("[www.nginx.cn/doc/]")])])])]),s._v(" "),a("h2",{attrs:{id:"nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx"}},[s._v("#")]),s._v(" Nginx")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("nginx")]),s._v(" 启动")]),s._v(" "),a("li",[a("code",[s._v("$ sudo nginx -s reload")]),s._v(" 重启")]),s._v(" "),a("li",[a("code",[s._v("$ sudo nginx -s stop")]),s._v(" 停止")]),s._v(" "),a("li",[a("code",[s._v("/usr/local/etc/nginx/nginx.conf")]),s._v(" 默认配置文件路径")]),s._v(" "),a("li",[a("code",[s._v("/usr/local/var/www/")]),s._v(" nginx服务器默认根目录")]),s._v(" "),a("li",[a("code",[s._v("/usr/local/Cellar/nginx/1.17.9")]),s._v(" nginx安装路径")]),s._v(" "),a("li",[a("code",[s._v("/usr/local/var/log/nginx/error.log")]),s._v(" 默认日志")])]),s._v(" "),a("h2",{attrs:{id:"配置-nginx-conf"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置-nginx-conf"}},[s._v("#")]),s._v(" 配置 nginx.conf")]),s._v(" "),a("div",{staticClass:"language-conf line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("  # 虚拟站点\n  server {  \n    # 当nginx接到请求后，会匹配其配置中的service模块\n    # 匹配方法就是将请求携带的host和port去跟配置中的server_name和listen相匹配\n    listen       8080;        \n    server_name  localhost; # 定义当前虚拟主机（站点）匹配请求的主机名\n\n    location / {\n        root   html; # Nginx默认值\n        # 设定Nginx服务器返回的文档名\n        index  index.html index.htm; # 先找根目录下的index.html，如果没有再找index.htm\n    }\n\n    # 动静分离\n    # 静态化配置，所有静态请求都转发给 nginx 处理，存放目录为 my-project\n    location ~ .*\\.(html|htm|gif|jpg|jpeg|bmp|png|ico|js|css)$ {\n        root /usr/local/var/www/my-project; # 静态请求所代理到的根目录\n    }\n    # 动态请求匹配到path为'node'的就转发到8002端口处理\n    location /node/ {  \n        proxy_pass http://localhost:8002; # 充当服务代理\n    }\n  }\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br")])]),a("h2",{attrs:{id:"正向代理-vpn"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#正向代理-vpn"}},[s._v("#")]),s._v(" 正向代理（vpn)")]),s._v(" "),a("p",[s._v("代理客户端（client)"),a("br"),s._v("\n对外公网地址变为vpn服务器的对外公网ip实现访问外网")]),s._v(" "),a("h2",{attrs:{id:"反向代理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#反向代理"}},[s._v("#")]),s._v(" 反向代理")]),s._v(" "),a("p",[s._v("代理服务器（server)")]),s._v(" "),a("ol",[a("li",[s._v("保障应用服务器的安全（增加一层代理，可以屏蔽危险攻击，更方便的控制权限）")]),s._v(" "),a("li",[s._v("实现负载均衡（稍等~下面会讲）")]),s._v(" "),a("li",[s._v("实现跨域（号称是最简单的跨域方式）")])]),s._v(" "),a("div",{staticClass:"language-conf line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("  server {\n    ...\n    location {\n      proxy_pass http://localhost:8000; # 反向代理配置，请求会被转发到8000端口\n    }\n    \n    location ^~ /api/ {\n      proxy_pass   http://api;\n      // 携带cookie\n      proxy_cookie_domain http://api localhost;\n    }\n    ...\n  }\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("h2",{attrs:{id:"负载均衡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#负载均衡"}},[s._v("#")]),s._v(" 负载均衡")]),s._v(" "),a("ol",[a("li",[s._v("分摊服务器集群压力")]),s._v(" "),a("li",[s._v("保证客户端访问的稳定性")])]),s._v(" "),a("div",{staticClass:"language-conf line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("  # 负载均衡：设置domain\n  upstream domain {\n    server localhost:8000;\n    server localhost:8001;\n  }\n  server {\n    ...\n    location / {\n      proxy_pass http://domain; # 负载均衡配置，请求会被平均分配到8000和8001端口\n      proxy_set_header Host $host:$server_port;\n    }\n    ...\n  }\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("h2",{attrs:{id:"正向代理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#正向代理"}},[s._v("#")]),s._v(" 正向代理")]),s._v(" "),a("p",[s._v("多个client发起请求由代理服务器去单独请求。科学上网本质也是一个正向代理工具。")]),s._v(" "),a("h2",{attrs:{id:"spa应用部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#spa应用部署"}},[s._v("#")]),s._v(" SPA应用部署")]),s._v(" "),a("div",{staticClass:"language-conf line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("  server: {\n    listen  9000;\n    server_name localhost;\n    location / {\n      root  html;\n      index index.html index.htm;\n      try_files $uri $uri/ /index.html;\n      add_header Cache-Control  max-age=259200; // 设置 response , 最大缓存时间为3d\n    }\n  }\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])])])}),[],!1,null,null,null);n.default=t.exports}}]);